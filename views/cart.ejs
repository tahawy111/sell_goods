<%- include('./partials/head.ejs') %>

<div class="container-fluid">
  <div class="row my-4">
    <div class="col-lg-12">
      <div class="table-responsive me-5">
        <table class="table table-bordered text-center my-3">
          <thead>
            <tr class="table-dark">
              <th>#</th>
              <th>Product Name</th>
              <th>Quantity</th>
              <th>Price Of One</th>
              <th>Total Price</th>
            </tr>
          </thead>

          <tbody style="vertical-align: middle">
            <% admin.cart.selectedProduct.forEach((ele,index)=>{ %>
            <tr>
              <td><%= index + 1 %></td>
              <td>
                <%= ele.name %>
                <a
                  href="/cart/deleteProduct/<%= index %>"
                  class="btn btn-danger float-end"
                  ><i class="fa-solid fa-trash"></i
                ></a>
              </td>
              <td>
                <% if (ele.quantity <= 1) { %>
                <a href="" class="btn me-2 disabled"
                  ><i class="fa-solid fa-square-minus fs-4"></i>
                </a>
                <% }else { %>
                <a href="/cart/decProduct/<%= index %>" class="btn me-2">
                  <i class="fa-solid fa-square-minus fs-4"></i>
                </a>
                <% } %> <%= ele.quantity %> <% if (ele.quantity >= ele.
                qtyInStore ) { %>

                <a href="" class="btn ms-2 disabled"
                  ><i class="fa-solid fa-square-plus fs-4"> </i>
                </a>

                <% }else{ %>
                <a href="/cart/incProduct/<%= index %>" class="btn ms-2">
                  <i class="fa-solid fa-square-plus fs-4"></i>
                </a>
                <%}%>
              </td>
              <td><%= ele.priceOfOne %></td>
              <td><%= ele.price %></td>
            </tr>
            <% }) %>
            <tr>
              <td colspan="2"></td>
              <td class="fw-bold">
                Total Quantity: <%= admin.cart.totalQuantity %>
              </td>
              <td></td>
              <td class="fw-bold">Total Price: <%= admin.cart.totalPrice %></td>
            </tr>
          </tbody>
        </table>

        <div class="d-flex justify-content-between">
          <a href="/cart/deleteAll" class="btn btn-danger delAll">حذف الكل</a>
          <a href="/cart/newBill" class="btn btn-success">فاتورة جديدة</a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  const delAll = document.querySelector(`.delAll`);
  delAll.addEventListener("click", (e) => {
    if (confirm("Do you want to delete all products from your cart") === true) {
    } else {
      e.preventDefault();
    }
  });
</script>

<%- include('./partials/footer.ejs') %>
