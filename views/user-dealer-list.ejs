<%- include('./partials/head.ejs') %>

<div class="container-fluid">
  <div class="row my-4">
    <div class="col-lg-12">
      <div class="table-responsive">
        <table class="table table-striped text-center my-3 table-data">
          <thead>
            <tr class="table-dark">
              <th>#</th>
              <th>اسم العميل</th>
              <th>العنوان</th>
              <th>اسم الشركة</th>
              <th>رقم الهاتف</th>
              <th>رقم الهاتف الارضي</th>
              <th>الفواتير</th>
              <th>Action</th>
              <th>عملية بيع ديلر</th>
            </tr>
          </thead>

          <tbody style="vertical-align: middle">
            <% data.forEach((ele,index)=>{ %>
            <tr>
              <td><%= index + 1 %></td>
              <td><%= ele.name %></td>
              <td><%= ele.address %></td>
              <td><%= ele.companyName %></td>
              <td><%= ele.phoneNumber %></td>
              <td><%= ele.telephoneFix %></td>
              <td>
                <a
                  class="btn btn-dark"
                  href="/user-dealer-list/bills/<%= ele._id %>"
                  >الفواتير</a
                >
              </td>

              <td>
                <a
                  href="/user-dealer-list/delete-user-dealer/<%= ele._id %>"
                  class="btn btn-danger del"
                  >حذف</a
                >
                <a
                  href="/user-dealer-list/edit-user-dealer/<%= ele._id %>"
                  class="btn btn-warning"
                  >تعديل</a
                >
              </td>
              <td>
                <form method="post" action="/">
                  <input type="hidden" name="userId" value="<%= ele._id %>" />
                  <button type="submit" class="btn btn-success">
                    بيع لهذا العميل
                  </button>
                </form>
              </td>
            </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<script>
  // to make a confirm to all btns
  let del = document.querySelectorAll(".del");
  // get array from buttons
  const delBtns = Array.from(del);
  delBtns.forEach((e) => {
    e.addEventListener("click", (el) => {
      if (confirm("هل تريد الحذف")) {
      } else {
        el.preventDefault();
      }
    });
  });
</script>

<%- include('./partials/footer.ejs') %>
